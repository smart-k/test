<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <newElementTitle>Task 1</newElementTitle>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    
    <style>
        .tasks {
            padding: 20px;
            padding-left: 40px;
        }
        .tasks li {
            position: relative;
        }
        
        .form-control {
            width: 465px;
            margin-bottom: 15px;
        }
        .button {
            font: 2em Arial,sans-serif;
        }
        
        .item {
            background-color: #eee;
            border-radius: 5px;
            padding: 4px 10px;
            margin-top: 10px;
        }
        .play{
            width: 100px;
            height: 100px;
            background-color: #369;
            border-radius: 100px;
            position: absolute;
            top: 120px;
        }
        
        .alert {
            position: absolute;
            width: 450px;
            right: 20px;
        }
        
        .box {
            height: 400px;
            background-color: #e1e2e3;
            border-color: #000;
            position: relative;
        }
        .dragable {
            position: absolute;
            width: 50px;
            height: 50px;            
            cursor: pointer;
            z-index: 1;
        }
        .red {
            background-color: #f00;
        }
        .green {
            background-color: #0b0;
        }
        .blue {
            background-color: #00f;
        }
        .purple {
            background-color: #874de4;
        }
        .move {
            cursor: move;
            opacity: 0.5;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            z-index: 10;
        }
    </style>
    
</head>
<body>
<ol class="tasks">
    <li>

<h4>
При нажатии на кнопку, добавлять в <code>div</code> с идентификатором <code>container</code> фрагмент разметки в выбраную позицию.
В заголовок писать порядковый номер вставляемого элемента
</h4>
<pre>
 &lt;div class="item"&gt; 
 &lt;h4&gt;Заголовок #&lt;/h4&gt;
 &lt;p&gt;текст текст текст&lt;/p&gt;
 &lt;/div&gt;
</pre>
<br />

<select class="form-control">
    <option>Добавить в начало</option>
    <option>Добавить в середину</option>
    <option>Добавить в конец</option>
</select>
<button class="button btn btn-success">Нажать</button>
<div id="container"></div>

<script>
// script for task #1
(function(){
var task1ButtonClickCounter=0;
function addMarkup(event){
    task1ButtonClickCounter++;
    var container = document.getElementById('container');
    var pre = document.getElementsByTagName('pre')[0].innerText;
    var newElement = document.createElement('div');
        newElement.innerHTML=pre;
    var newElementTitle = newElement.getElementsByTagName('h4')[0].innerText;
        newElement.getElementsByTagName('h4')[0].innerText=newElementTitle+task1ButtonClickCounter;
    var selectValue = document.getElementsByTagName('select')[0].value;
        switch (selectValue){
            case "Добавить в начало":
            if (task1ButtonClickCounter==1) container.appendChild(newElement); // If first child
            else container.insertBefore(newElement, container.children[0]);                              
                break;
            case "Добавить в середину":
            if (task1ButtonClickCounter==1) container.appendChild(newElement);  // If first child
            else container.insertBefore(newElement, container.children[parseInt(task1ButtonClickCounter/2)]); 
                 break;
            case "Добавить в конец":
                container.appendChild(newElement);
                break;                    
                           }
}
    document.querySelector("button").addEventListener("click", addMarkup);
})();
</script>

    </li>
    <li style="height: 220px">

<h4>При нажатии на ссылку, равномерно перемещать HTML-элемент с классом <code>play</code> вправо, при повторном нажатии - перемещать влево.</h4>
<br />


<a href="/" class="button btn btn-success">Поехали!</a>
<div class="play"></div>

<script>
// script for task #2
(function(){
var task2buttonClickCounter=0;
var interval_id_right, interval_id_left;
        
function moveElement(event){
event.preventDefault();   
    const stepRight=30;
    const stepLeft=30;
    const delay=100;
    var limitRight = document.querySelector('ol.tasks').clientWidth;
    var limitLeft = 0;
task2buttonClickCounter++;
        
function move(direction){
    var playElement;
    var step;
    var left;
    
    switch (direction){
        case "right": 
            clearInterval(interval_id_left);    
            step=stepRight;
            interval_id_right = setInterval(function(){
                playElement = document.querySelector(".play");
                if (!playElement.style.left) playElement.style.left = "0";
                left = parseInt(playElement.style.left);
                if (left<limitRight) playElement.style.left = (left+step)+'px';
                else playElement.style.left = (left-step)+'px';
            }, delay);
            break;
        case "left": 
            clearInterval(interval_id_right);    
            step=stepLeft;
            interval_id_left = setInterval(function(){
                playElement = document.querySelector(".play");
                if (!playElement.style.left) playElement.style.left = "0";
                left = parseInt(playElement.style.left);
                if (left>limitLeft) playElement.style.left = (left-step)+'px';
                else playElement.style.left = (left+step)+'px';
            }, delay);
            break;
                     }
}
if (task2buttonClickCounter % 2 == 0) move("left");  
else  move("right"); 
}
    var button = document.getElementsByTagName('a')[0];
        button.addEventListener("click", moveElement);
})();
</script>

    </li>
    <li>
<h4>При нажатии на кнопку выдавать bootstrap-alert соответствующего типа c текстом из поля ввода.
HTML код всплывающих элементов можно посмотреть по <a href="https://www.w3schools.com/bootstrap/bootstrap_alerts.asp">ссылке</a>.
Alert должен плавно появляться в верхнем правом углу, при нажатии на крестик - исчезать. Так же alert'ы должны закрываться автоматичесски через 10 секунд.
Если несколько раз подряд нажать на кнопку - то сообщения выстраиваются один под другим.
</h4>
<br />


<input type="text" class="form-control">

<button class="button btn btn-success">Success</button>
<button class="button btn btn-info">Info</button>
<button class="button btn btn-warning">Warning</button>
<button class="button btn btn-danger">Danger</button>


<script>
// script for task #3
/*
Remove alert message if x clicked
*/
function closeAlert(event){
var el = event.target.parentNode;
el.classList.remove("show");   
}
    
document.addEventListener("DOMContentLoaded", function(event){
event.preventDefault();
const delay=10000;
var style = document.getElementsByTagName('style')[0];
    style.innerHTML+=" div.alert {opacity: 0; transition: opacity 1s} div.alert.show {opacity: 1;}";
var inputs = document.getElementsByTagName('input');
var alerts=document.querySelectorAll('div.alert');
var message;
var newMessage;
var timers=[];

function showAlert(alertIndex){
var message = alerts[alertIndex].innerHTML;
var newMessage=message.split('\</strong\>')[0]+"\</strong\> " + inputs[0].value;
alerts[alertIndex].innerHTML=newMessage;
alerts[alertIndex].classList.add("show");
if (timers[alertIndex]) clearTimeout(timers[alertIndex]);   
timers[alertIndex]=setTimeout(function(){alerts[alertIndex].classList.remove("show");}, delay);     
}
function showSuccessAlert(event){
showAlert(0);  
}
function showInfoAlert(event){
showAlert(1); 
}    
function showWarningAlert(event){
showAlert(2);    
}  
function showDangerAlert(event){
showAlert(3);   
}
function showDblClickAlert(event){
for (var i=0; i<4; i++){
    if (timers[i]) clearTimeout(timers[i]);   
}
showSuccessAlert(event);
showInfoAlert(event);
showWarningAlert(event);
showDangerAlert(event);
}
 
var buttons = document.getElementsByTagName('button');
    buttons[buttons.length-1].addEventListener("click", showDangerAlert);
    buttons[buttons.length-2].addEventListener("click", showWarningAlert);
    buttons[buttons.length-3].addEventListener("click", showInfoAlert);
    buttons[buttons.length-4].addEventListener("click", showSuccessAlert);
    for (var i=1; i<5;i++){
    buttons[buttons.length-i].addEventListener("dblclick", showDblClickAlert);    
    }
    
var closeLabel = document.querySelectorAll('a.close');
    for (var i=0; i<closeLabel.length; i++ ){
    closeLabel[i].setAttribute("onclick","closeAlert(event)"); 
    }
});
    
</script>
    </li>
    <li>
<h4><b class="h2 text-danger">*</b>
Сделать кнопочку <i class="text-info">scroll to top</i>, она должна появляться когда пользователь проскролил страницу на размер одного видимого экрана.
Кнопочку нужно аккуратно стилизовать.
</h4>
<br />

<script>
// script for task #4
var screenHeight =  document.documentElement.clientHeight;
document.addEventListener("DOMContentLoaded", function(event){
var style = document.getElementsByTagName('style')[0];
    style.innerHTML+=" a.scroll {position:fixed; bottom:20px; right:20px;} a.invisible {opacity: 0;}";
var scrollButton = document.createElement('a');
var value = "scroll to top"; 
var buttonText = document.createTextNode(value);
    scrollButton.setAttribute('href', '/');
    scrollButton.className="button btn btn-info scroll invisible"; 
    scrollButton.appendChild(buttonText);
var body = document.getElementsByTagName('body')[0];
    body.appendChild(scrollButton); 

window.onscroll= function(){
var scrollElement = document.querySelector('a.scroll');
if (document.documentElement.scrollTop > screenHeight) scrollElement.classList.remove("invisible");
else scrollElement.classList.add("invisible"); 
};
});
    

</script>
    </li>
    <li>
<h4><b class="h2 text-danger">**</b>
Реализовать перемещение элементов внутри контейнера. Элементы нельзя ставить ближе <i class="text-info">10px</i> к границе контейнера.
Во время перемещения элемента ему должен присваиваться класс <code>move</code>. Перетаскивание эелементов должно так де работать и на мобильных устройствах.</h4>
<br />

<div class="panel box">
<div class="dragable red" style="left: 250px;top: 28px;"></div>
<div class="dragable green" style="left: 50px;top: 68px;"></div>
<div class="dragable blue" style="left: 350px;top: 287px;"></div>
<div class="dragable purple move" style="left: 70px;top: 28px;"></div>
</div>

<script>
// script for task #5
var items = document.querySelectorAll('div.dragable');
var panel = document.querySelector('div.panel.box');
var shiftX, shiftY;
 items.forEach(function(item){
 item.onmousedown = function(e) {

  var coords = getCoords(item);
    
  shiftX = e.pageX - coords.left;
  shiftY = e.pageY - coords.top;
    
  item.classList.add("move");
  document.body.appendChild(item);
  moveAt(e);

  function moveAt(e) {
    var panelCoords = getCoords(panel);
    var left = e.pageX - shiftX;
    var top = e.pageY - shiftY;
    if (left-panelCoords.left > 10 && panelCoords.right-left>10) item.style.left = left + 'px';
    if (top-panelCoords.top > 10 && panelCoords.bottom-top>10) item.style.top = e.pageY - shiftY + 'px';
  }

  document.onmousemove = function(e) {
    moveAt(e);
  };

  item.onmouseup = function() {
    item.classList.remove("move");
    document.onmousemove = null;
    item.onmouseup = null;
  };

};

item.ondragstart = function() {
  return false;
};
     
 });
    
function getCoords(elem) {
  var box = elem.getBoundingClientRect();
  return {
    top: box.top + pageYOffset,
    bottom: box.bottom + pageYOffset, 
    left: box.left + pageXOffset,
    right: box.right + pageXOffset
  };
}

</script>
    </li>
</ol>
<br><br><br>

<div class="alert alert-success" style="top: 10px">
  <a href="#" class="close" newElementTitle="close">&times;</a>
  <strong>Success!</strong> Indicates a successful or positive action.
</div>

<div class="alert alert-info" style="top: 70px">
  <a href="#" class="close" newElementTitle="close">&times;</a>
  <strong>Info!</strong> Indicates a neutral informative change or action. With long long text
</div>

<div class="alert alert-warning" style="top: 150px">
  <a href="#" class="close" newElementTitle="close">&times;</a>
  <strong>Warning!</strong> Indicates a warning that might need attention.
</div>

<div class="alert alert-danger" style="top: 210px">
  <a href="#" class="close" newElementTitle="close">&times;</a>
  <strong>Danger!</strong> Indicates a dangerous or potentially negative action.
</div>

</body>
</html>




